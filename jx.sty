% Personal sty file 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                                                        %
%   ██████╗ ██╗███████╗████████╗███████╗██████╗ ███╗   ██╗ ██████╗ ██╗   ██╗ █████╗      %
%  ██╔════╝ ██║██╔════╝╚══██╔══╝██╔════╝██╔══██╗████╗  ██║██╔═══██╗██║   ██║██╔══██╗     %
%  ██║  ███╗██║█████╗     ██║   █████╗  ██║  ██║██╔██╗ ██║██║   ██║██║   ██║███████║     %
%  ██║   ██║██║██╔══╝     ██║   ██╔══╝  ██║  ██║██║╚██╗██║██║   ██║╚██╗ ██╔╝██╔══██║     %
%  ╚██████╔╝██║██║        ██║   ███████╗██████╔╝██║ ╚████║╚██████╔╝ ╚████╔╝ ██║  ██║     %
%   ╚═════╝ ╚═╝╚═╝        ╚═╝   ╚══════╝╚═════╝ ╚═╝  ╚═══╝ ╚═════╝   ╚═══╝  ╚═╝  ╚═╝     %
%                                                                                        %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Some macros were taken from: https://github.com/vEnhance/dotfiles/blob/main/texmf/tex/latex/evan/evan.sty

%%%% Packages %%%% 

%% Page Dimensions 
\usepackage[a4paper, top=0.5in, bottom=0.2in, left=0.5in, right=0.5in, footskip=0.3in, includefoot]{geometry} 

\newcommand{\setauthor}[1]{\def\authorname{#1}}
\newcommand{\getauthor}{\authorname} 
\setauthor{To Fill Up}

%% Front Page Stuff 
\AtBeginDocument{
  \author{\getauthor}
  \renewcommand{\maketitle}{
    \begin{center}
      \Huge\sffamily\bfseries \@title 
      % \vspace{0.5em} % Optional Spacing
      \ifx\@author\@empty\else
        \vskip 1em
        \large\sffamily \@author
      \fi
      \ifx\@date\@empty\else
        \vskip 1em
        \normalsize \@date % Date Display
      \fi
    \end{center}
    \vskip 1em 
  }
  \maketitle
}

%% Hyperref Metadata and Link Display 
\usepackage[colorlinks=true, pdfusetitle]{hyperref} 
\hypersetup{
  pdfauthor={\getauthor}, 
  pdfsubject={To fill in}, 
  % pdfproducer={To fill in}, 
  pdftoolbar=true, 
  pdfmenubar=true,
  urlcolor=violet, 
  citecolor=green, 
  filecolor=magenta
} 

%% Nice Titles and Subsections
\usepackage{titlesec}
\newcommand{\sectionbreak}{\clearpage}
\titleformat{\section}[hang]
  {\normalfont\Large\sffamily\bfseries} % Black title font with sans-serif
  {\textcolor{Magenta}{\S\thesection}}{1em}{} % Magenta numbers with § symbol

%% Define custom format for subsections
\titleformat{\subsection}[hang]
  {\normalfont\large\sffamily\bfseries} % Black title font with sans-serif
  {\textcolor{Magenta}{\S\thesubsection}}{1em}{} % Magenta numbers with § symbol

\titleformat{\subsubsection}[hang] 
  {\normalfont\normalsize\sffamily\bfseries} % Black title font with sans-serif
  {\textcolor{Rhodamine}{\S\thesubsubsection}}{1em}{} % Magenta numbers with § symbol

%% Sans-serif font for TOC 
\usepackage{tocloft}
\renewcommand{\cfttoctitlefont}{\Large\sffamily\bfseries} % Huge, sans-serif, bold
\renewcommand{\cftsecfont}{\large\sffamily} % Large, sans-serif for section
\renewcommand{\cftsecpagefont}{\large\sffamily} % Large, sans-serif for page numbers

\renewcommand{\cftsubsecfont}{\normalsize\sffamily} % Normal size, sans-serif for subsection
\renewcommand{\cftsubsecpagefont}{\normalsize\sffamily} % Normal size, sans-serif for page numbers

\renewcommand{\cftsubsubsecfont}{\normalsize\sffamily} % Normal size, sans-serif for subsection
\renewcommand{\cftsubsubsecpagefont}{\normalsize\sffamily} % Normal size, sans-serif for page numbers

%%%% Math-related Packages %%%%
\RequirePackage{amsthm}
\RequirePackage{tcolorbox} 
\RequirePackage[svgnames, table, dvipsnames]{xcolor} 

\usepackage{amsmath, amssymb, amsthm, amsfonts}
\usepackage{thmtools}
\usepackage{mathtools} 
\usepackage{pifont} % For unusual fonts: https://ctan.org/pkg/pifont
\usepackage{derivative} % For nice and easy derivatives: https://ctan.org/pkg/derivative 
\newenvironment{subproof}[1][Proof]{%
\begin{proof}[#1] \renewcommand{\qedsymbol}{$\blacksquare$}}%
{\end{proof}}

%%%% For code: Listings %%%%
\definecolor{kwcolor}{rgb}{0,0.5,0.9}       % Blue for keywords
\definecolor{strcolor}{0.75,0.45,0.9}       % Bright purple for strings
\definecolor{cmtcolor}{rgb}{0.3,0.6,0.3}    % Softer green for comments
\definecolor{numcolor}{rgb}{0.5,0.5,0.5}    % Grey for numbers
\definecolor{bgcolor}{rgb}{0.95,0.95,0.92}  % Light grey for background

\usepackage{listings} % TO-DO Later
\lstdefinestyle{jxstyle}{ 
  backgroundcolor=\color{bgcolor}, 
  commentstyle=\color{cmtcolor},
  keywordstyle=\color{kwcolor},
  numberstyle=\footnotesize\color{numcolor},
  stringstyle=\color{strcolor}, 
  basicstyle=\small\ttfamily, % Small, monospaced font 
  breakatwhitespace=false, 
  breaklines=true,
  captionpos=b,
  keepspaces=true,
  numbers=left,
  numbersep=5pt,
  showspaces=false, 
  showstringspaces=false,
  showtabs=false,
  tabsize=2, 
  frame=shadowbox, 
  frame=single, 
  rulecolor=\color{gray}
}

%%%% Other Tibits %%%% 
\usepackage{wrapfig}
\usepackage{ellipsis}
\usepackage{xstring}
\usepackage{enumitem}

%%%% For bibliography; we use BibLaTeX here %%%% 
\usepackage[backend=biber, backref=true, style=alphabetic]{biblatex}
  \DeclareFieldFormat{labelalpha}{\textbf{\small #1}}
  \DeclareBibliographyStrings{english}{% 
    backrefpage = {cited p.}, % for single page number
    backrefpages = {cited pp.}, % for multiple page numbers
  } 
  \DeclareFieldFormat{journaltitle}{\mkbibemph{#1}}
  \DeclareFieldFormat[inbook,thesis]{title}{\mkbibemph{#1}\addperiod} % italic title with period
  \DeclareFieldFormat[article]{title}{#1} % title of journal article is printed as normal text
  \DeclareFieldFormat[article]{volume}{\textbf{#1}\addcolon\space} % bold volume numbers
  % Separate ISBN-13 field
  \DeclareSourcemap{\maps[datatype=bibtex]{\map{\step[fieldsource=ISBN-13,fieldtarget=ISBN]}}}
  \renewcommand{\mkbibnamegiven}[1]{\textsc{#1}}
  \renewcommand{\mkbibnamefamily}[1]{\textsc{#1}}
  \renewcommand{\mkbibnameprefix}[1]{\textsc{#1}}
  \renewcommand{\mkbibnamesuffix}[1]{\textsc{#1}}
  \renewcommand{\finentrypunct}{}

%%%% Theorem Styles %%%%
\usepackage[framemethod=TikZ]{mdframed}
\usetikzlibrary{shadows}
% https://tex.stackexchange.com/a/292090/76888
% https://github.com/marcodaniel/mdframed/issues/12
\usepackage{xpatch}
\xpatchcmd{\endmdframed}
  {\aftergroup\endmdf@trivlist\color@endgroup}
  {\endmdf@trivlist\color@endgroup\@doendpe}
  {}{}
  \mdfdefinestyle{mdbluebox}{%
  roundcorner=10pt,
  linewidth=1pt,
  skipabove=12pt,
  innerbottommargin=9pt,
  skipbelow=2pt,
  linecolor=blue,
  nobreak=true,
  backgroundcolor=TealBlue!5,
}
\declaretheoremstyle[
  headfont=\sffamily\bfseries\color{MidnightBlue},
  mdframed={style=mdbluebox},
  headpunct={\\[3pt]},
  postheadspace={0pt}
]{thmbluebox}

\mdfdefinestyle{mdredbox}{%
  linewidth=0.5pt,
  skipabove=12pt,
  frametitleaboveskip=5pt,
  frametitlebelowskip=0pt,
  skipbelow=2pt,
  frametitlefont=\bfseries,
  innertopmargin=4pt,
  innerbottommargin=8pt,
  nobreak=true,
  backgroundcolor=Salmon!5,
  linecolor=RawSienna,
}
\declaretheoremstyle[
  headfont=\bfseries\color{RawSienna},
  mdframed={style=mdredbox},
  headpunct={\\[3pt]},
  postheadspace={0pt},
]{thmredbox}

\mdfdefinestyle{mdgreenbox}{%
  skipabove=8pt,
  skipbelow=0pt,
  linewidth=2pt,
  rightline=false,
  leftline=true,
  topline=false,
  bottomline=false,
  linecolor=ForestGreen,
  backgroundcolor=ForestGreen!5,
}
\declaretheoremstyle[
  headfont=\bfseries\sffamily\color{ForestGreen!70!black},
  bodyfont=\normalfont,
  spaceabove=2pt,
  spacebelow=1pt,
  mdframed={style=mdgreenbox},
  headpunct={ --- },
]{thmgreenbox}

\mdfdefinestyle{mdblackbox}{%
  skipabove=8pt,
  linewidth=3pt,
  rightline=false,
  leftline=true,
  topline=false,
  bottomline=false,
  linecolor=black,
  backgroundcolor=RedViolet!5!gray!5,
}
\declaretheoremstyle[
  headfont=\bfseries,
  bodyfont=\normalfont\small,
  spaceabove=0pt,
  spacebelow=0pt,
  mdframed={style=mdblackbox}
]{thmblackbox}

\mdfdefinestyle{mdpurplebox}{%
  roundcorner=10pt,
  linewidth=1pt,
  skipabove=12pt,
  skipbelow=12pt,
  innertopmargin=9pt,
  innerbottommargin=9pt,
  linecolor=black,
  nobreak=true,
  backgroundcolor=Orchid!10,
  shadow=true,
  shadowsize=6pt,
  shadowcolor=black!30,
  frametitleaboveskip=8pt,
  frametitlebelowskip=8pt,
  frametitlebackgroundcolor=Violet!50!black,
  frametitlefont=\bfseries\sffamily\color{white},
  frametitlerule=true,
}
\newcommand{\listhack}{$\empty$\vspace{-2em}}

\declaretheoremstyle[
  headfont=\color{blue!40!black}\sffamily\bfseries,
  spaceabove=8pt,
  spacebelow=8pt,
  bodyfont=\normalfont
]{basehead}

\theoremstyle{definition} 
\declaretheorem[style=thmbluebox,name=Theorem,numberwithin=section]{theorem}
\declaretheorem[style=thmbluebox,name=Lemma,sibling=theorem]{lemma}
\declaretheorem[style=thmbluebox,name=Proposition,sibling=theorem]{proposition}
\declaretheorem[style=thmbluebox,name=Corollary,sibling=theorem]{corollary}
\declaretheorem[style=thmbluebox,name=Assumption,sibling=theorem]{assume}
\declaretheorem[style=thmbluebox,name=Theorem,numbered=no]{theorem*}
\declaretheorem[style=thmbluebox,name=Lemma,numbered=no]{lemma*}
\declaretheorem[style=thmbluebox,name=Proposition,numbered=no]{proposition*}
\declaretheorem[style=thmbluebox,name=Corollary,numbered=no]{corollary*}
\declaretheorem[style=thmbluebox,name=Assumption,numbered=no]{assume*}
\declaretheorem[style=thmgreenbox,name=Algorithm,sibling=theorem]{algorithm}
\declaretheorem[style=thmgreenbox,name=Algorithm,numbered=no]{algorithm*}
\declaretheorem[style=thmgreenbox,name=Claim,sibling=theorem]{claim}
\declaretheorem[style=thmgreenbox,name=Claim,numbered=no]{claim*}
\declaretheorem[style=thmredbox,name=Example,sibling=theorem]{example}
\declaretheorem[style=thmredbox,name=Example,numbered=no]{example*}

\declaretheorem[style=thmblackbox,name=Remark,sibling=theorem]{remark}
\declaretheorem[style=thmblackbox,name=Remark,numbered=no]{remark*}

\declaretheorem[style=basehead,name=Answer,sibling=theorem]{answer}
\declaretheorem[style=basehead,name=Answer,numbered=no]{answer*}
\declaretheorem[style=basehead,name=Conjecture,sibling=theorem]{conjecture}
\declaretheorem[style=basehead,name=Conjecture,numbered=no]{conjecture*}
\declaretheorem[style=basehead,name=Definition,sibling=theorem]{definition}
\declaretheorem[style=basehead,name=Definition,numbered=no]{definition*}
\declaretheorem[style=basehead,name=Exercise,sibling=theorem]{exercise}
\declaretheorem[style=basehead,name=Exercise,numbered=no]{exercise*}
\declaretheorem[style=basehead,name=Fact,sibling=theorem]{fact}
\declaretheorem[style=basehead,name=Fact,numbered=no]{fact*}
\declaretheorem[style=basehead,name=Problem,sibling=theorem]{problem}
\declaretheorem[style=basehead,name=Problem,numbered=no]{problem*}
\declaretheorem[style=basehead,name=Question,sibling=theorem]{ques}
\declaretheorem[style=basehead,name=Question,numbered=no]{ques*}

\renewcommand{\theHtheorem}{\theHsection.theorem.\arabic{theorem}}
\renewcommand{\theHlemma}{\theHsection.lemma.\arabic{lemma}}
\renewcommand{\theHproposition}{\theHsection.proposition.\arabic{proposition}}
\renewcommand{\theHcorollary}{\theHsection.corollary.\arabic{corollary}}
\renewcommand{\theHassume}{\theHsection.assumption.\arabic{assume}}

\renewcommand{\theHalgorithm}{\theHsection.algorithm.\arabic{algorithm}}
\renewcommand{\theHclaim}{\theHsection.claim.\arabic{claim}}
\renewcommand{\theHexample}{\theHsection.example.\arabic{example}}
\renewcommand{\theHremark}{\theHsection.remark.\arabic{remark}}

\renewcommand{\theHanswer}{\theHsection.answer.\arabic{answer}}
\renewcommand{\theHconjecture}{\theHsection.conjecture.\arabic{conjecture}}
\renewcommand{\theHdefinition}{\theHsection.definition.\arabic{definition}}
\renewcommand{\theHexercise}{\theHsection.exercise.\arabic{exercise}}
\renewcommand{\theHfact}{\theHsection.fact.\arabic{fact}}
\renewcommand{\theHproblem}{\theHsection.problem.\arabic{problem}}
\renewcommand{\theHques}{\theHsection.question.\arabic{ques}}

\usepackage[nameinlink]{cleveref} % Put cleverref after hyperref 

%%%% Macros %%%% 
\newcommand{\mailto}[1]{\href{mailto:#1}{\texttt{#1}}}

\newcommand{\ol}{\overline} 
\newcommand{\ul}{\underline} 
\newcommand{\wt}{\widetilde} 
\newcommand{\wh}{\widehat}
\newcommand{\eps}{\varepsilon}

% Delimiters / Grouping Symbols 
\newcommand{\abs}[1]{\left\lvert #1 \right\rvert}
\newcommand{\norm}[1]{\left\lVert #1 \right\rVert}
\newcommand{\seg}[1]{\overline{#1}}
\newcommand{\floor}[1]{\left\lfloor #1 \right\rfloor} % Floor Function
\newcommand{\ceiling}[1]{\left\lceil #1 \right\rceil}

%% Math Symbols %% 
% The basics 
\newcommand{\CC}{\mathbb C}     % The set of complex numbers, or otherwise
\newcommand{\FF}{\mathbb F}     % A field, or otherwise
\newcommand{\NN}{\mathbb N}     % The set of natural numbers, or otherwise
\newcommand{\QQ}{\mathbb Q}     % The set of rational numbers, or otherwise
\newcommand{\RR}{\mathbb R}     % The set of real numbers, or otherwise
\newcommand{\ZZ}{\mathbb Z}     % The set of integers, or otherwise 
\newcommand{\PP}{\mathbb P}     % The probability of an event
\newcommand{\dg}{^\circ}        % The degree of some value
\newcommand{\inv}{^{-1}}        % The inverse of an expression
\newcommand{\injto}{\hookrightarrow} % The "injective" operator; denotes some set is injective to another set of elements
\newcommand{\surjto}{\twoheadrightarrow} % The "surjective" operator; denotes some set is surjective to another set of elements 
\newcommand{\On}{\mathrm{On}}   % Ordinals

% Math Operators; stuff like sin 
\DeclareMathOperator{\img}{im}      % Image
\DeclareMathOperator{\Img}{Im}      % Image
\DeclareMathOperator{\coker}{coker} % Cokernel
\DeclareMathOperator{\Coker}{Coker} % Cokernel
\DeclareMathOperator{\Ker}{Ker}     % Kernel
\DeclareMathOperator{\rank}{rank}   % Rank
\DeclareMathOperator{\Spec}{Spec}   % spectrum
\DeclareMathOperator{\Tr}{Tr}       % trace
\DeclareMathOperator{\pr}{pr}       % projection
\DeclareMathOperator{\ext}{ext}     % extension
\DeclareMathOperator{\pred}{pred}   % predecessor
\DeclareMathOperator{\dom}{dom}     % domain
\DeclareMathOperator{\ran}{ran}     % range
\DeclareMathOperator{\Hom}{Hom}     % homomorphism
\DeclareMathOperator{\Mor}{Mor}     % morphisms
\DeclareMathOperator{\End}{End}     % endomorphism

% Math Operators; for probability
\DeclareMathOperator{\odds}{odds} % odds of an event 
\DeclareMathOperator{\Bern}{Bern} % Bernoulli Distribution
\DeclareMathOperator{\Bin}{Bin} % Binomial Distribution
\DeclareMathOperator{\Pois}{Pois} % Poisson Distribution
\DeclareMathOperator{\Geom}{Geom} % Geometric Distribution
\DeclareMathOperator{\HGeom}{HGeom} % Hypergeometric Distribution
\DeclareMathOperator{\DUnif}{DUnif} % Discrete Uniform Distribution
\DeclareMathOperator{\KLD}{\mathcal{D}_{KL}} % Kulllback-Leibler Divergence

% Script letters 
\newcommand{\SA}{\mathcal A}
\newcommand{\SB}{\mathcal B}
\newcommand{\SC}{\mathcal C}
\newcommand{\SF}{\mathcal F}
\newcommand{\SG}{\mathcal G}
\newcommand{\SH}{\mathcal H}
\newcommand{\OO}{\mathcal O}

\newcommand{\SCA}{\mathscr A}
\newcommand{\SCB}{\mathcal B}
\newcommand{\SCC}{\mathcal C}
\newcommand{\SCD}{\mathcal D}
\newcommand{\SCE}{\mathcal E}
\newcommand{\SCF}{\mathcal F}
\newcommand{\SCG}{\mathcal G}
\newcommand{\SCH}{\mathcal H}

% Operators 
\newcommand{\tm}{^{\intercal}} % (Matrix) Transpose
\newcommand{\itm}{^{- \intercal}} % Inverse (Matrix) Transpose 
